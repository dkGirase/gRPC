syntax = "proto3";
package post;

enum ReactionType {
  LIKE = 0;
  DISLIKE = 1;
}

message Post {
  string id = 1;
  string title = 2;
  string body = 3;
  string authorId = 4;
}

message Reaction {
  string id = 1;
  string postId = 2;
  string userId = 3;
  ReactionType type = 4;
  string createdAt = 5;
}

message GetPostRequest { string id = 1; }

message CreatePostRequest {
  string title = 1;
  string body = 2;
  string authorId = 3;
}

message UpdatePostRequest { string id = 1; string title = 2; string body = 3; }
message DeletePostRequest { string id = 1; }

message ListPostsRequest {}
message ListPostsResponse { repeated Post posts = 1; }

message CreateReactionRequest {
  string postId = 1;
  string userId = 2;
  ReactionType type = 3;
}

message DeleteReactionRequest {
  string postId = 1;
  string userId = 2;
}

message ListReactionsForPostRequest {
  string postId = 1;
}

message ListReactionsForPostResponse {
  repeated Reaction reactions = 1;
}

message ListReactionsForUserRequest {
  string userId = 1;
}

message ListReactionsForUserResponse {
  repeated Reaction reactions = 1;
}

message GetReactionForUserRequest {
  string postId = 1;
  string userId = 2;
}

service PostService {
  rpc GetPost(GetPostRequest) returns (Post);
  rpc CreatePost(CreatePostRequest) returns (Post);
  rpc UpdatePost(UpdatePostRequest) returns (Post);
  rpc DeletePost(DeletePostRequest) returns (Post);
  rpc ListPosts(ListPostsRequest) returns (ListPostsResponse);

  // âœ… Reaction APIs moved HERE
  rpc CreateReaction(CreateReactionRequest) returns (Reaction);
  rpc DeleteReaction(DeleteReactionRequest) returns (Reaction);
  rpc ListReactionsForPost(ListReactionsForPostRequest) returns (ListReactionsForPostResponse);
  rpc ListReactionsForUser(ListReactionsForUserRequest) returns (ListReactionsForUserResponse);
  rpc GetReactionForUser(GetReactionForUserRequest) returns (Reaction);
}
